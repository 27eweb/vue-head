<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Using vue-head</title>
  <meta name="description" id="desc" content="My initial description">
  <link rel="canonical" id="canonical" href="http://myblog.com/">
</head>
<body>
  
  <div id="app">
    <header>
      <a v-link="{ path: '/' }">HOME</a>
      <nav>
        <ul>
          <li>
            <a v-link="{ path: '/about' }">ABOUT</a>
          </li>
          <li>
            <a v-link="{ path: '/blog' }">BLOG</a>
          </li>
          <li>
            <a v-link="{ path: '/contact' }">CONTACT</a>
          </li>          
        </ul>    
      </nav>
    </header>
    <hr>
    <main class="content">
      <router-view></router-view>  
    </main>

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.24/vue.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/0.7.13/vue-router.min.js"></script>
  <script src="../vue-head.js"></script>

  <script>

  // Component HOME
  var home = Vue.extend({
    'template': '<h1>HOME</h1>'
  })

  // Component ABOUT
  var about = Vue.extend({
    'template': '<h1>ABOUT</h1>',
    data: function () {
      return {
        infoPage: {
          title: 'About me'
        }
      }
    },
    head: {
      // To use "this" in the component, it is necessary to return the object through a function
      title: function () {
        return {
          inner: this.infoPage.title,
          separator: ':)'
        }
      },
      meta: [
        { name: 'description', c: 'About me', id: 'desc' }
      ],
      style: [
        { type: 'text/css', inner: 'body { background-color: #000; color: #fff}' }
      ],
      link: [
        { rel: 'canonical', h: 'http://example.com/#!/about/', id: 'canonical'},
        { rel: 'icon', href: '/static/assets/favicon-16.png', sizes: '16x16', type: 'image/png' },
        /* shorthand property */
        { r: 'icon', h: '/static/assets/favicon-32.png', sz: '32x32', t: 'image/png' }
      ]
    }
  })

  // Component BLOG
  var blog = Vue.extend({
    data: function () {
      return {
        params: {
          title: 'website name',
          description: 'website description',
          image: false,
          app: 'app name',          
        }
      }
    },
    ready: function(){
      var self = this
      window.setTimeout(function () {
        self.params.title = 'new website name'
        self.$emit('updateHead')
      }, 3000)
    },
    'template': '<h1>BLOG</h1>',
    head: {
      title: function () {
        return {
          inner: this.params.title,
          separator: ' ',
          complement: ' '
        }
      },
      meta:  function () {
        return [
          { name: 'application-name', content: this.params.app },
          { name: 'description', content: this.params.description },
          { name: 'twitter:title', content: this.params.title },
          { n: 'twitter:description', c: this.params.description},
          { p: 'og:image', c: this.params.image },
        ]
      }
    }
  })

  // Component CONTACT
  var contact = Vue.extend({
    'template': '<h1>CONTACT</h1>',
    head: {
      title: {
        inner: 'It will be a pleasure',
        separator: ' ', // Leave empty separator
        complement: ' ' // Leave empty complement
      },
      meta: [
        { name: 'description', c: 'Happy for your contact', id: 'desc' }
      ],
      link: [
        { rel: 'canonical', h: 'http://example.com/#!/contact/', id: 'canonical'}
      ]
    }
  })

  // CONFIGURATION 
  Vue.use(VueHead)
  Vue.use(VueRouter)

  var router = new VueRouter()
  router.map({
    '/': {
      component: home
    },
    '/about': {
      component: about
    },
    '/blog': {
      component: blog
    },
    '/contact': {
      component: contact
    },
    '*': {
      component: home
    }
  })

  var App = Vue.extend()
  router.start(App, '#app')

  </script>
</body>
</html>